---
title: 了解设计模式之装饰器模式
date: 2020-09-06 14:38:27
tags:
  - 设计模式
categories: 
  - 设计模式
cover: 
abbrlink: 202012
---

## 前言

这篇是写关于js的设计模式，装饰器模式的**简单了解**，废话少说，开整!

## 介绍

张三前几天买了一台小米10至尊纪念版，但是他怕自己的手机从高处掉下来摔碎后盖，他想到把手机的后盖拆下来改造一下，让后盖更耐摔，但这样的话就相当于破坏了这部手机，失去保修等权利了，于是张三冥思苦想，想出了一个办法，买一个手机壳套上。这样解决了问题，同时还不会破坏手机的完整性，这个手机壳就相当于我们的装饰器，我们要在不修改原函数的基础上给函数添加功能。

## 代码

这个代码就是我们的目标，我们要对其增加一个功能，在输出``"arguments is " + a,b,c``之前先输出一下``"芜湖，时刻准备起飞"``。接下来我们来实现这个功能。
```js
function core(a,b,c){
  console.log("arguments is " + a,b,c);
}
```

```js
Function.prototype.before = function(beforeFn){
  // this = core
  return (...args)=>{
    beforeFn();
    this(...args);
  }
}
```
我们在函数的原型上添加了before函数，这个函数传入一个参数，就是我们要添加的输出语句的函数。它返回一个函数，函数内部按照我们想要的顺序先后执行对应函数，这里需要注意，因为我们需要在return的函数内部调用core，所以这里使用箭头函数可以保存上级作用域内的this，从而调用core。

```js
let newFn = core.before(()=>{
  console.log("before Fn");
});
```
接下里我们就可以定义一下newFn，它接受before的返回值，也就是刚才说的那个箭头函数，这样我们就简单的完成了一个装饰器，给core函数添加了一个功能。

运行结果
![we14h9.png](https://s1.ax1x.com/2020/09/06/we14h9.png)